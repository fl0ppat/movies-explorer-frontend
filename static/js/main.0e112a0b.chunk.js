(this["webpackJsonpmovies-explorer-frontend"]=this["webpackJsonpmovies-explorer-frontend"]||[]).push([[0],Array(20).concat([function(e,t,n){},,,,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),i=n(12),a=n.n(i),r=(n(28),n(3)),l=n(2),o=n(4),j=(n(29),n(0));var u=function(e){var t=e.loggedIn,n=Object(o.h)().pathname;return t?Object(j.jsx)("nav",{className:"navigation",children:Object(j.jsxs)("ul",{className:"navigation__list",children:[Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{className:"navigation__item ".concat("/movies"===n&&"navigation__item_selected"),to:"/movies",children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{className:"navigation__item ".concat("/saved-movies"===n&&"navigation__item_selected"),to:"/saved-movies",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})})]})}):""},m=n.p+"static/media/logo.4efad476.svg";var d=function(){var e=Object(s.useState)({width:void 0}),t=Object(r.a)(e,2),n=t[0],c=t[1];return Object(s.useEffect)((function(){function e(){c({width:window.innerWidth})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n},b=(n(39),n.p+"static/media/icon__profile.c146d569.svg");n(40);var h=function(){return Object(j.jsxs)(l.b,{className:"User-link",to:"/profile",children:["\u0410\u043a\u043a\u0430\u0443\u043d\u0442",Object(j.jsx)("img",{className:"User-link__pic",src:b,alt:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0444\u0438\u043b\u044f"})]})};var _=function(){function e(){document.querySelector("#menu__toggle").checked=!1}return Object(j.jsxs)("div",{className:"menu",children:[Object(j.jsx)("input",{id:"menu__toggle",type:"checkbox"}),Object(j.jsx)("label",{className:"menu__btn",htmlFor:"menu__toggle",children:Object(j.jsx)("span",{})}),Object(j.jsx)("div",{onClick:e,className:"menu__overlay"}),Object(j.jsxs)("ul",{className:"menu__box",children:[Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{onClick:e,className:"menu__item",to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{onClick:e,className:"menu__item",to:"/movies",children:"\u0424\u0438\u043b\u044c\u043c\u044b"})}),Object(j.jsx)("li",{children:Object(j.jsx)(l.b,{onClick:e,className:"menu__item",to:"/saved-movies",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0451\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u043c\u044b"})}),Object(j.jsx)("li",{onClick:e,children:Object(j.jsx)(h,{})})]})]})};n(41);var f=function(e){var t=e.loggedIn,n=Object(o.h)().pathname,s=d().width;return"/movies"===n||"/saved-movies"===n||"/"===n||"/profile"===n?s<=768?Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)(l.b,{className:"header__logo-link",to:"/",children:Object(j.jsx)("img",{className:"header__logo",src:m,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),t?Object(j.jsx)(_,{}):Object(j.jsxs)("span",{children:[Object(j.jsx)(l.b,{className:"header__signup",to:"/signup",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)(l.b,{className:"header__signin",to:"/signin",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)(l.b,{className:"header__logo-link",to:"/",children:Object(j.jsx)("img",{className:"header__logo",src:m,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(j.jsx)(u,{loggedIn:e.loggedIn}),t?Object(j.jsx)(h,{}):Object(j.jsxs)("span",{children:[Object(j.jsx)(l.b,{className:"header__signup",to:"/signup",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)(l.b,{className:"header__signin",to:"/signin",children:"\u0412\u043e\u0439\u0442\u0438"})]})]}):""};n(42);var O=function(){return Object(j.jsxs)("section",{className:"carousel",children:[Object(j.jsx)("h1",{className:"carousel__title",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442\u0430 \u0412\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438."}),Object(j.jsxs)("ul",{className:"carousel__link-list",children:[Object(j.jsx)("li",{className:"carousel__item",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(j.jsx)("li",{className:"carousel__item",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(j.jsx)("li",{className:"carousel__item",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"})]})]})};n(43);var x=function(){return Object(j.jsxs)("section",{className:"about-project",children:[Object(j.jsx)("h2",{className:"section__title",children:"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"}),Object(j.jsx)("hr",{}),Object(j.jsxs)("div",{className:"about-project__grid",children:[Object(j.jsxs)("div",{className:"about-project__item-left",children:[Object(j.jsx)("h3",{className:"about-project__subtitle",children:"\u0414\u0438\u043f\u043b\u043e\u043c\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u0432\u043a\u043b\u044e\u0447\u0430\u043b 5 \u044d\u0442\u0430\u043f\u043e\u0432"}),Object(j.jsx)("p",{className:"about-project__paragraph",children:"\u0421\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043b\u0430\u043d\u0430, \u0440\u0430\u0431\u043e\u0442\u0443 \u043d\u0430\u0434 \u0431\u044d\u043a\u0435\u043d\u0434\u043e\u043c, \u0432\u0451\u0440\u0441\u0442\u043a\u0443, \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0438 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u043e\u0440\u0430\u0431\u043e\u0442\u043a\u0438."})]}),Object(j.jsxs)("div",{className:"about-project__item-right",children:[Object(j.jsx)("h3",{className:"about-project__subtitle",children:"\u041d\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0438\u043f\u043b\u043e\u043c\u0430 \u0443\u0448\u043b\u043e 5 \u043d\u0435\u0434\u0435\u043b\u044c"}),Object(j.jsx)("p",{className:"about-project__paragraph",children:"\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430 \u0431\u044b\u043b \u043c\u044f\u0433\u043a\u0438\u0439 \u0438 \u0436\u0451\u0441\u0442\u043a\u0438\u0439 \u0434\u0435\u0434\u043b\u0430\u0439\u043d, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0443\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u0431\u043b\u044e\u0434\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0449\u0438\u0442\u0438\u0442\u044c\u0441\u044f."})]}),Object(j.jsxs)("div",{className:"about-project__item-center",children:[Object(j.jsx)("div",{className:"about-project__back-block",children:"1 \u043d\u0435\u0434\u0435\u043b\u044f"}),Object(j.jsx)("div",{className:"about-project__back-tooltip",children:"Back-end"}),Object(j.jsx)("div",{className:"about-project__front-block",children:"4 \u043d\u0435\u0434\u0435\u043b\u0438"}),Object(j.jsx)("div",{className:"about-project__front-tooltip",children:"Front-end"})]})]})]})};n(44);var p=function(){return Object(j.jsx)("section",{className:"techs",children:Object(j.jsxs)("div",{className:"techs__inner",children:[Object(j.jsx)("h2",{className:"section__title",children:"\u0422\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438"}),Object(j.jsx)("hr",{}),Object(j.jsx)("h3",{className:"techs__title",children:"7 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0439"}),Object(j.jsx)("p",{className:"techs__paragraph",children:"\u041d\u0430 \u043a\u0443\u0440\u0441\u0435 \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043c\u044b \u043e\u0441\u0432\u043e\u0438\u043b\u0438 \u0442\u0435\u0445\u043d\u043e\u043b\u043e\u0433\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043b\u0438 \u0432 \u0434\u0438\u043f\u043b\u043e\u043c\u043d\u043e\u043c \u043f\u0440\u043e\u0435\u043a\u0442\u0435."}),Object(j.jsxs)("ul",{className:"techs__list",children:[Object(j.jsx)("li",{className:"techs__item",children:"HTML"}),Object(j.jsx)("li",{className:"techs__item",children:"CSS"}),Object(j.jsx)("li",{className:"techs__item",children:"JS"}),Object(j.jsx)("li",{className:"techs__item",children:"React"}),Object(j.jsx)("li",{className:"techs__item",children:"Git"}),Object(j.jsx)("li",{className:"techs__item",children:"Express.js"}),Object(j.jsx)("li",{className:"techs__item",children:"mongoDB"})]})]})})},g=(n(45),n.p+"static/media/avatar.252fd1f7.jpg");var v=function(){return Object(j.jsxs)("section",{className:"about-me",children:[Object(j.jsx)("h2",{className:"section__title",children:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442"}),Object(j.jsx)("hr",{}),Object(j.jsx)("img",{className:"about-me__image",alt:"\u0424\u043e\u0442\u043e \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430",src:g}),Object(j.jsxs)("div",{className:"about-me__info",children:[Object(j.jsx)("h3",{className:"about-me__title",children:"\u0412\u0438\u0442\u0430\u043b\u0438\u0439"}),Object(j.jsx)("p",{className:"about-me__subtitle",children:"\u0424\u0440\u043e\u043d\u0442\u0435\u043d\u0434-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, 30 \u043b\u0435\u0442"}),Object(j.jsx)("p",{className:"about-me__paragraph",children:"\u042f \u0440\u043e\u0434\u0438\u043b\u0441\u044f \u0438 \u0436\u0438\u0432\u0443 \u0432 \u0421\u0430\u0440\u0430\u0442\u043e\u0432\u0435, \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b \u0444\u0430\u043a\u0443\u043b\u044c\u0442\u0435\u0442 \u044d\u043a\u043e\u043d\u043e\u043c\u0438\u043a\u0438 \u0421\u0413\u0423. \u0423 \u043c\u0435\u043d\u044f \u0435\u0441\u0442\u044c \u0436\u0435\u043d\u0430 \u0438 \u0434\u043e\u0447\u044c. \u042f \u043b\u044e\u0431\u043b\u044e \u0441\u043b\u0443\u0448\u0430\u0442\u044c \u043c\u0443\u0437\u044b\u043a\u0443, \u0430 \u0435\u0449\u0451 \u0443\u0432\u043b\u0435\u043a\u0430\u044e\u0441\u044c \u0431\u0435\u0433\u043e\u043c. \u041d\u0435\u0434\u0430\u0432\u043d\u043e \u043d\u0430\u0447\u0430\u043b \u043a\u043e\u0434\u0438\u0442\u044c. \u0421 2015 \u0433\u043e\u0434\u0430 \u0440\u0430\u0431\u043e\u0442\u0430\u043b \u0432 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \xab\u0421\u041a\u0411 \u041a\u043e\u043d\u0442\u0443\u0440\xbb. \u041f\u043e\u0441\u043b\u0435 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u043f\u0440\u043e\u0448\u0451\u043b \u043a\u0443\u0440\u0441 \u043f\u043e \u0432\u0435\u0431-\u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435, \u043d\u0430\u0447\u0430\u043b \u0437\u0430\u043d\u0438\u043c\u0430\u0442\u044c\u0441\u044f \u0444\u0440\u0438\u043b\u0430\u043d\u0441-\u0437\u0430\u043a\u0430\u0437\u0430\u043c\u0438 \u0438 \u0443\u0448\u0451\u043b \u0441 \u043f\u043e\u0441\u0442\u043e\u044f\u043d\u043d\u043e\u0439 \u0440\u0430\u0431\u043e\u0442\u044b."}),Object(j.jsxs)("ul",{className:"about-me__social-links",children:[Object(j.jsx)("li",{className:"about-me__social-link",children:Object(j.jsx)("a",{href:"https://ru-ru.facebook.com/zuck",rel:"noreferrer",target:"_blank",children:"Facebook"})}),Object(j.jsx)("li",{className:"about-me__social-link",children:Object(j.jsx)("a",{href:"https://github.com/torvalds",rel:"noreferrer",target:"_blank",children:"Github"})})]})]}),Object(j.jsxs)("div",{className:"about-me__portfolio",children:[Object(j.jsx)("h4",{className:"about-me__portfolio-title",children:"\u041f\u043e\u0440\u0442\u0444\u043e\u043b\u0438\u043e"}),Object(j.jsxs)("ul",{className:"about-me__portfolio-links",children:[Object(j.jsx)("li",{className:"about-me__portfolio-link",children:Object(j.jsx)("a",{href:"https://github.com/fl0ppat/how-to-learn",rel:"noreferrer",target:"_blank",children:"\u0421\u0442\u0430\u0442\u0438\u0447\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"})}),Object(j.jsx)("li",{className:"about-me__portfolio-link",children:Object(j.jsx)("a",{href:"https://fl0ppat.github.io/russian-travel/",rel:"noreferrer",target:"_blank",children:"\u0410\u0434\u0430\u043f\u0442\u0438\u0432\u043d\u044b\u0439 \u0441\u0430\u0439\u0442"})}),Object(j.jsx)("li",{className:"about-me__portfolio-link",children:Object(j.jsx)("a",{href:"https://github.com/fl0ppat/react-mesto-api-full",rel:"noreferrer",target:"_blank",children:"\u041e\u0434\u043d\u043e\u0441\u0442\u0440\u0430\u043d\u0438\u0447\u043d\u043e\u0435 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435"})})]})]})]})};n(46);var N=function(){return Object(j.jsxs)("div",{className:"main",children:[Object(j.jsx)(O,{}),Object(j.jsx)(x,{}),Object(j.jsx)(p,{}),Object(j.jsx)(v,{})]})};n(47);var k=function(e){var t=d().width,n=Object(s.useState)(""),c=Object(r.a)(n,2),i=c[0],a=c[1],l=document.querySelector(".search__wrapper");function o(){var t=l.querySelector(".search__toggle");e.onSearch({text:i,short:t.checked})}return Object(j.jsxs)("div",{className:"search__wrapper",children:[Object(j.jsxs)("form",{className:"search__line",onSubmit:o,children:[Object(j.jsx)("input",{className:"search__input",placeholder:"\u0424\u0438\u043b\u044c\u043c",required:!0,type:"text"}),Object(j.jsx)("input",{className:"search__submit",onClick:function(e){return a(e.target.value)},type:"submit",value:i}),t>600&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("span",{className:"search__delimiter"}),Object(j.jsx)("input",{className:"search__toggle",type:"checkbox",onClick:o,id:"checkbox"}),Object(j.jsx)("label",{className:"search__toggle-label",htmlFor:"checkbox",children:Object(j.jsx)("span",{className:"search__toggle-text",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})})]})]}),t<=600&&Object(j.jsxs)("div",{className:"search__toggle-wrapper",children:[Object(j.jsx)("input",{className:"search__toggle",type:"checkbox",onClick:o,id:"checkbox"}),Object(j.jsx)("label",{className:"search__toggle-label",htmlFor:"checkbox",children:Object(j.jsx)("span",{className:"search__toggle-text",children:"\u041a\u043e\u0440\u043e\u0442\u043a\u043e\u043c\u0435\u0442\u0440\u0430\u0436\u043a\u0438"})})]})]})},y=n(11),S=n.n(y),C=n(19),w="https://api.nomoreparties.co/beatfilm-movies",L="https://api.fl0ppat-diplom.nomoredomains.club/",R="https://api.nomoreparties.co",U=(n(49),c.a.createContext({}));var E=function(e){var t,n=Object(s.useContext)(U),c=R+e.film.image.url,i=e.film,a=i.nameRU,r=i.duration,l=i.trailerLink;return Object(j.jsxs)("div",{className:"movie",children:[Object(j.jsx)("a",{target:"_blank",href:l,rel:"noreferrer",children:Object(j.jsx)("img",{className:"movie__cover",src:c,alt:"\u041e\u0431\u043b\u043e\u0436\u043a\u0430 ".concat(a)})}),Object(j.jsx)("p",{className:"movie__title",children:a}),e.mode?Object(j.jsx)("button",{className:"movie__button movie__button_delete",onClick:function(){var t=Object(C.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.onDislike(e.film.id),t.next=3,n.target.parentElement.remove();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}):(t=e.film,n.movies.includes(t.id)?Object(j.jsx)("button",{className:"movie__button movie__button_like movie__button_liked",onClick:function(){var t=Object(C.a)(S.a.mark((function t(n){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.onDislike(e.film.id),t.next=3,n.target.classList.remove("movie__button_liked");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}):Object(j.jsx)("button",{className:"movie__button movie__button_like",onClick:function(t){e.onLike(e.film),t.target.classList.add("movie__button_liked")}})),Object(j.jsx)("p",{className:"movie__duration",children:function(e){var t=Math.floor(e/60),n=e%60;return"".concat(0===t?"":t+"\u0447 ").concat(n,"\u043c")}(r)})]})};n(50);function q(e,t){var n,c=e.movies,i=e.cardsOnScreen,a=Object(s.useState)([]),l=Object(r.a)(a,2),o=l[0],u=l[1];function m(t){var n=o.length,s=c.slice(n,n+t).map((function(t){return Object(j.jsx)(E,{mode:e.mode,onLike:e.onLike,onDislike:e.onDislike,film:t},t.id)}));u(o.concat(s))}return Object(s.useImperativeHandle)(t,(function(){return{cleanAllCards:function(){u([])}}})),Object(s.useEffect)((function(){m(i.size)}),[e.movies]),Object(s.useEffect)((function(){var e=o.length%i.load;o.length%i.load!==0&&m(i.load-e)}),[i]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("section",{className:"movies-list",children:(n=o,n.length>0?n:Object(j.jsx)("h2",{className:"movies-list__notfound",children:"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"}))}),o.length>0&&c.length>o.length&&Object(j.jsx)("button",{className:"movies-list__loadmore",onClick:function(){return m(i.load)},children:"\u0415\u0449\u0451"})]})}var I,T=Object(s.forwardRef)(q),F=w,M=function(){return fetch(F).then((function(e){if(200===e.status)return e.json();throw new Error("Something went wrong on api server!")}))},z=(n(51),function(){var e=c.a.useContext(I),t=e.modalContent,n=e.handleModal,s=e.modal,i=e.closable;return s?a.a.createPortal(Object(j.jsx)("div",{className:"modal",children:Object(j.jsxs)("div",{className:"modal__inner",children:[i&&Object(j.jsx)("button",{className:"modal__close",onClick:function(){return n()},children:"\xd7"}),t]})}),document.querySelector("#modal-root")):null}),D=(I=c.a.createContext()).Provider,P=function(e){var t=e.children,n=function(){var e=c.a.useState(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],i=c.a.useState(!1),a=Object(r.a)(i,2),l=a[0],o=a[1],j=c.a.useState(""),u=Object(r.a)(j,2),m=u[0],d=u[1];return{modal:n,handleModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;s(!n),e&&(o(t),d(e))},modalContent:m,closable:l,closeModal:function(){s(!1),d("")}}}(),s=n.modal,i=n.handleModal,a=n.modalContent,l=n.closable,o=n.closeModal;return Object(j.jsxs)(D,{value:{modal:s,handleModal:i,modalContent:a,closable:l,closeModal:o},children:[Object(j.jsx)(z,{closable:l}),t]})},A=(n(52),function(){return Object(j.jsx)("div",{className:"preloader",children:Object(j.jsx)("div",{className:"preloader__container",children:Object(j.jsx)("span",{className:"preloader__round"})})})}),J=n(13),V=n(14),G=L,B=new(function(){function e(t){Object(J.a)(this,e),this._baseURL=t}return Object(V.a)(e,[{key:"likeFilm",value:function(e){var t=this,n=e.country,s=e.director,c=e.duration,i=e.year,a=e.description,r=e.image,l=e.trailer,o=e.nameRU,j=e.nameEN,u=e.thumbnail,m=e.movieId;return this._sendRequest("POST","".concat(this._baseURL,"/movies"),{"Content-Type":"application/json"},{country:n,director:s,duration:c,year:i,description:a,image:r,trailer:l,nameRU:o,nameEN:j,thumbnail:u,movieId:m}).then((function(e){return t._handleResponseStatus(e)}))}},{key:"deleteFilm",value:function(e){var t=this;return this._sendRequest("DELETE","".concat(this._baseURL,"/movies/").concat(e),{"Content-Type":"application/json"}).then((function(e){return t._handleResponseStatus(e)}))}},{key:"_handleResponseStatus",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"_objectIsEmptyOrUndefined",value:function(e){return"undefined"===e||e&&0===Object.keys(e).length}},{key:"_sendRequest",value:function(e,t,n,s){var c={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};n&&!this._objectIsEmptyOrUndefined(n)&&Object.assign(c,n);var i={method:e,headers:c,credentials:"include"};return s&&!this._objectIsEmptyOrUndefined(s)&&(i.body=JSON.stringify(s)),fetch(t,i)}}]),e}())(G);var H=Object(o.i)((function(e){var t=Object(s.useState)([]),n=Object(r.a)(t,2),c=n[0],i=n[1],a=Object(s.useContext)(U),l=Object(s.useContext)(I),u=l.handleModal,m=l.closeModal,b=Object(o.h)().pathname,h=Object(s.useRef)(),_=d();function f(e,t){var n;return n=e.filter((function(e){return e.nameRU.toLowerCase().includes(t.text.toLowerCase())})),!0===t.short&&(n=n.filter((function(e){return Number(e.duration)<=40}))),n}return Object(s.useEffect)((function(){h.current.cleanAllCards()}),[b]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(k,{onSearch:function(e){u(Object(j.jsx)(A,{}),!1),h.current.cleanAllCards();var t=localStorage.getItem("movies");if(null!==t)return setTimeout(m,300),i(f(JSON.parse(t),e));M().then((function(t){return localStorage.setItem("movies",JSON.stringify(t)),setTimeout(m,300),i(f(t,e))})).catch((function(e){u(Object(j.jsx)("h2",{className:"modal__title",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"}),!0),console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445: "+e)}))}}),Object(j.jsx)(T,{ref:h,movies:"/movies"===b?c:function(){if(null===a)return[];var e=a.movies;return c.filter((function(t){return e.indexOf(t.id)>-1}))}(),mode:"/saved-movies"===b,onLike:function(t){var n=t.country,s=t.director,c=t.duration,i=t.year,a=t.description,r=t.image,l=t.nameRU,o=t.nameEN;B.likeFilm({country:n,director:s,duration:c,year:i,description:a,image:R+r.url,trailer:t.trailerLink,nameRU:l,nameEN:o,thumbnail:R+r.url,movieId:t.id}).then((function(){e.onLike(t.id)})).catch((function(e){return console.error(e)}))},onDislike:function(t){B.deleteFilm(t).then((function(){e.onDislike(t)})).catch((function(e){return console.error(e)}))},cardsOnScreen:_.width>768?{size:12,load:3}:_.width<768&&_.width>=600?{size:8,load:2}:{size:5,load:1}})]})}));n(20);var W=function(e,t){e.target.validity.valid?(e.target.nextSibling.style.visibility="hidden",e.target.classList.remove("signform__input_invalid")):(e.target.nextSibling.textContent=e.target.validationMessage,e.target.nextSibling.style.visibility="visible",e.target.classList.add("signform__input_invalid")),t(e.target.value)},K=L,Q=new(function(){function e(t){Object(J.a)(this,e),this._baseURL=t}return Object(V.a)(e,[{key:"registerUser",value:function(e,t,n){var s=this;return this._sendRequest("POST","".concat(this._baseURL,"/signup"),{"Content-Type":"application/json"},{password:e,email:t,name:n}).then((function(e){return s._handleResponseStatus(e)}))}},{key:"loginUser",value:function(e,t){var n=this;return this._sendRequest("POST","".concat(this._baseURL,"/signin"),{"Content-Type":"application/json"},{password:e,email:t}).then((function(e){return n._handleResponseStatus(e)}))}},{key:"getUser",value:function(){var e=this;return this._sendRequest("GET","".concat(this._baseURL,"/users/me")).then((function(t){return e._handleResponseStatus(t)}))}},{key:"signOut",value:function(){var e=this;return this._sendRequest("GET","".concat(this._baseURL,"/signout")).then((function(t){return e._handleResponseStatus(t)}))}},{key:"editProfileData",value:function(e,t){var n=this;return this._sendRequest("PATCH","".concat(this._baseURL,"/users/me"),{"Content-Type":"application/json"},{name:e,email:t}).then((function(e){return n._handleResponseStatus(e)}))}},{key:"_handleResponseStatus",value:function(e){return e.ok?e.json():Promise.reject(e)}},{key:"_objectIsEmptyOrUndefined",value:function(e){return"undefined"===e||e&&0===Object.keys(e).length}},{key:"_sendRequest",value:function(e,t,n,s){var c={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};n&&!this._objectIsEmptyOrUndefined(n)&&Object.assign(c,n);var i={method:e,headers:c,credentials:"include"};return s&&!this._objectIsEmptyOrUndefined(s)&&(i.body=JSON.stringify(s)),fetch(t,i)}}]),e}())(K);var X=function(e){var t=Object(s.useState)(""),n=Object(r.a)(t,2),c=n[0],i=n[1],a=Object(s.useState)(""),u=Object(r.a)(a,2),d=u[0],b=u[1],h=Object(s.useState)(""),_=Object(r.a)(h,2),f=_[0],O=_[1],x=Object(s.useContext)(I).handleModal,p=Object(o.g)();return Object(j.jsxs)("section",{className:"signform",children:[Object(j.jsx)(l.b,{to:"/",children:Object(j.jsx)("img",{src:m,className:"signform__logo",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(j.jsx)("h1",{className:"signform__title",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c"}),Object(j.jsxs)("form",{className:"signup__form signform__form",onChange:function(e){c.length>0&&d.length>0&&f.length>0&&e.target.form.checkValidity()?e.target.form.querySelector(".signform__submit").disabled=!1:e.target.form.querySelector(".signform__submit").disabled=!0},onSubmit:function(t){t.preventDefault(),x(Object(j.jsx)(A,{}),!1),t.target.checkValidity()&&Q.registerUser(f,d,c).then((function(){Q.loginUser(f,d).then((function(t){e.onLogin(t.name,t.email),p.push("/movies")}))})).catch((function(){x(Object(j.jsx)("h2",{className:"modal__title",children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"}),!0)}))},noValidate:!0,children:[Object(j.jsxs)("div",{className:"signform__field",children:[Object(j.jsx)("label",{className:"signform__label",children:"\u0418\u043c\u044f"}),Object(j.jsx)("input",{size:"396",value:c,onChange:function(e){return W(e,i)},className:"signform__input",type:"text",minLength:"3",maxLength:"30",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f",id:"name"}),Object(j.jsx)("div",{className:"signform__info",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u043e \u043f\u043e\u043b\u0435."})]}),Object(j.jsxs)("div",{className:"signform__field",children:[Object(j.jsx)("label",{className:"signform__label",children:"E-mail"}),Object(j.jsx)("input",{size:"396",value:d,onChange:function(e){return W(e,b)},className:"signform__input",type:"email",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443",id:"email"}),Object(j.jsx)("div",{className:"signform__info",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u043e \u043f\u043e\u043b\u0435."})]}),Object(j.jsxs)("div",{className:"signform__field",children:[Object(j.jsx)("label",{className:"signform__label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(j.jsx)("input",{size:"396",value:f,onChange:function(e){return W(e,O)},className:"signform__input",type:"password",minLength:"6",maxLength:"30",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",id:"password"}),Object(j.jsx)("div",{className:"signform__info",children:"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u044d\u0442\u043e \u043f\u043e\u043b\u0435."})]}),Object(j.jsx)("input",{className:"signup__submit signform__submit",type:"submit",disabled:!0,value:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]}),Object(j.jsxs)(l.b,{className:"signform__link",to:"/signin",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(j.jsx)("span",{className:"signform__link-accent",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})};var Y=function(e){var t=Object(s.useState)(""),n=Object(r.a)(t,2),c=n[0],i=n[1],a=Object(s.useState)(""),u=Object(r.a)(a,2),d=u[0],b=u[1],h=Object(s.useContext)(I).handleModal,_=Object(o.g)();return Object(j.jsxs)("section",{className:"signform",children:[Object(j.jsx)(l.b,{to:"/",children:Object(j.jsx)("img",{src:m,className:"signform__logo",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})}),Object(j.jsx)("h1",{className:"signform__title",children:"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c"}),Object(j.jsxs)("form",{className:"signup__form signform__form",onChange:function(e){c.length>0&&d.length>0&&e.target.form.checkValidity()?e.target.form.querySelector(".signform__submit").disabled=!1:e.target.form.querySelector(".signform__submit").disabled=!0},onSubmit:function(t){t.target.checkValidity()&&(h(Object(j.jsx)(A,{}),!1),Q.loginUser(d,c).then((function(t){e.onLogin(t.token),_.push("/movies")})).catch((function(){h(Object(j.jsx)("h2",{children:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"}),!0)})))},noValidate:!0,children:[Object(j.jsxs)("div",{className:"signform__field",children:[Object(j.jsx)("label",{className:"signform__label",children:"E-mail"}),Object(j.jsx)("input",{size:"396",value:c,onChange:function(e){return W(e,i)},className:"signform__input",type:"email",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0447\u0442\u0443"}),Object(j.jsx)("div",{className:"signform__info",children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."})]}),Object(j.jsxs)("div",{className:"signform__field",children:[Object(j.jsx)("label",{className:"signform__label",children:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(j.jsx)("input",{size:"396",value:d,onChange:function(e){return W(e,b)},className:"signform__input",type:"password",minLength:"6",maxLength:"30",required:!0,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}),Object(j.jsx)("div",{className:"signform__info",children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."})]}),Object(j.jsx)("input",{className:"signup__submit signform__submit",type:"submit",disabled:!0,value:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(j.jsxs)(l.b,{className:"signform__link",to:"/signup",children:["\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(j.jsx)("span",{className:"signform__link-accent",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})};n(53);var Z=function(e){var t=Object(s.useContext)(U),n=Object(s.useState)(""),c=Object(r.a)(n,2),i=c[0],a=c[1],l=Object(s.useState)(""),o=Object(r.a)(l,2),u=o[0],m=o[1],d=Object(s.useState)("\u0434\u0440\u0443\u0433"),b=Object(r.a)(d,2),h=b[0],_=b[1],f=Object(s.useContext)(I).handleModal,O=document.querySelector("#name"),x=document.querySelector("#email"),p=document.querySelector(".profile__submit");return Object(s.useEffect)((function(){null!==t&&(a(t.name),_(t.name),m(t.email))}),[t]),Object(j.jsxs)("section",{className:"profile",children:[Object(j.jsxs)("h1",{className:"profile__title",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",h,"!"]}),Object(j.jsxs)("form",{className:"profile__form",onChange:function(e){!e.target.form.checkValidity()||O.value===t.name&&x.value===t.email||(p.style.visibility="visible")},onSubmit:function(n){n.preventDefault(),O.value===t.name&&x.value===t.email||e.onChangeProfile(i,u).then(f(Object(j.jsx)("h2",{className:"modal__title",children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"}),!0))},children:[Object(j.jsxs)("fieldset",{className:"profile__fieldset",children:[Object(j.jsxs)("div",{className:"profile__field",children:[Object(j.jsx)("label",{className:"profile__label",htmlFor:"name",children:"\u0418\u043c\u044f"}),Object(j.jsx)("input",{className:"profile__input",type:"text",name:"name",minLength:"3",maxLength:"30",id:"name",placeholder:"\u0418\u043c\u044f",value:i,onChange:function(e){return a(e.target.value)}})]}),Object(j.jsxs)("div",{className:"profile__field",children:[Object(j.jsx)("label",{className:"profile__label",htmlFor:"email",children:"E-mail"}),Object(j.jsx)("input",{className:"profile__input",type:"email",name:"email",id:"email",placeholder:"\u041f\u043e\u0447\u0442\u0430",value:u,onChange:function(e){return m(e.target.value)}})]})]}),Object(j.jsx)("input",{className:"profile__submit",type:"submit",style:{visibility:"hidden"},value:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"})]}),Object(j.jsx)("button",{onClick:e.onSignOut,className:"profile__signout",children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]})};n(54);var $=function(){return Object(j.jsxs)("section",{className:"notfound",children:[Object(j.jsx)("h1",{className:"notfound__title",children:"404"}),Object(j.jsx)("p",{className:"notfound__text",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(j.jsx)(l.b,{className:"notfound__link",to:"/",children:"\u041d\u0430\u0437\u0430\u0434"})]})},ee=n(22),te=n(23),ne=["component"],se=function(e){var t=e.component,n=Object(te.a)(e,ne);return Object(j.jsx)(o.b,{children:function(){return n.loggedIn?Object(j.jsx)(t,Object(ee.a)({},n)):Object(j.jsx)(o.a,{to:"/signin"})}})};n(55);var ce=function(){var e=Object(o.h)().pathname;return"/movies"===e||"/saved-movies"===e||"/"===e?Object(j.jsxs)("footer",{className:"footer",children:[Object(j.jsx)("p",{className:"footer__annotation",children:"\u0423\u0447\u0435\u0431\u043d\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442 \u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c \u0445 BeatFilm."}),Object(j.jsxs)("div",{className:"footer__row",children:[Object(j.jsx)("p",{className:"footer__date",children:"@ 2021"}),Object(j.jsxs)("ul",{className:"footer__links",children:[Object(j.jsx)("a",{href:"https://praktikum.yandex.ru/",rel:"noreferrer",target:"_blank",className:"footer__link",children:Object(j.jsx)("li",{children:"\u042f\u043d\u0434\u0435\u043a\u0441.\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0443\u043c"})}),Object(j.jsx)("a",{href:"https://github.com/torvalds",rel:"noreferrer",target:"_blank",className:"footer__link",children:Object(j.jsx)("li",{children:"Github"})}),Object(j.jsx)("a",{href:"https://ru-ru.facebook.com/zuck",rel:"noreferrer",target:"_blank",className:"footer__link",children:Object(j.jsx)("li",{children:"Facebook"})})]})]})]}):""};n(56);var ie=function(){var e=Object(s.useState)(null),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(s.useState)(window.localStorage.getItem("token")),a=Object(r.a)(i,2),u=a[0],m=a[1];function d(e){m(e),window.localStorage.setItem("token",e),Q.getUser().then((function(e){c(e)})).catch((function(e){return console.error(e)}))}return Object(s.useEffect)((function(){u&&Q.getUser().then((function(e){c(e)})).catch((function(e){return console.error(e)}))}),[]),Object(j.jsx)(U.Provider,{value:n,children:Object(j.jsx)(P,{children:Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(l.a,{basename:"/",children:[Object(j.jsx)(f,{loggedIn:u}),Object(j.jsxs)(o.d,{children:[Object(j.jsx)(se,{path:"/movies",loggedIn:u,component:H,onLike:function(e){if(!n.movies.includes(e)){var t=n;t.movies.push(e),c(t)}}}),Object(j.jsx)(se,{path:"/saved-movies",loggedIn:u,component:H,onDislike:function(e){if(n.movies.includes(e)){var t=n;return t.movies.filter((function(t){return t!==e})),c(t),!0}}}),Object(j.jsx)(o.b,{path:"/signup",children:Object(j.jsx)(X,{onLogin:d})}),Object(j.jsx)(o.b,{path:"/signin",children:Object(j.jsx)(Y,{onLogin:d})}),Object(j.jsx)(se,{path:"/profile",loggedIn:u,onSignOut:function(){Q.signOut().then((function(){m(null),window.localStorage.removeItem("token"),c(null)})).catch((function(e){return console.error(e)}))},onChangeProfile:function(e,t){return Q.editProfileData(e,t).then((function(e){c(e)})).catch((function(e){return console.error(e)}))},currentUser:n,component:Z}),Object(j.jsx)(o.b,{exact:!0,path:"/",children:Object(j.jsx)(N,{})}),Object(j.jsx)(o.b,{children:Object(j.jsx)($,{})})]}),Object(j.jsx)(ce,{})]})})})})};a.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(ie,{})}),document.getElementById("root"))}]),[[57,1,2]]]);
//# sourceMappingURL=main.0e112a0b.chunk.js.map